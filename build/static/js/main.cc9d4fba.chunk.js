(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(34),i=a.n(s),r=(a(94),a(11)),o=a(12),c=a(15),u=a(13),m=a(14),h=a(7),d=a(20),p=a(44),g=(a(96),a(184)),f=a(185),E=a(186),v=a(192),b=a(193),y=(a(98),a(194)),w=a(181),C=a(191),O=a(182),j=a(183),S=a(9),k=a.n(S);k.a.defaults.withCredentials=!0;var x=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e,a))).handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n.handleChangeEmail=n.handleChangeEmail.bind(Object(h.a)(Object(h.a)(n))),n.handleChangeConfirm=n.handleChangeConfirm.bind(Object(h.a)(Object(h.a)(n))),n.handleChangeName=n.handleChangeName.bind(Object(h.a)(Object(h.a)(n))),n.handleDismiss=n.handleDismiss.bind(Object(h.a)(Object(h.a)(n))),n.handleShow=n.handleShow.bind(Object(h.a)(Object(h.a)(n))),n.signUpClicked=n.signUpClicked.bind(Object(h.a)(Object(h.a)(n))),n.displayAlert=n.displayAlert.bind(Object(h.a)(Object(h.a)(n))),n.state={password:"",email:"",confPass:"",name:"",signInLoading:!1,show:!1,signupStatus:"success",signUpMessage:"You have signed up successfully. Please check your email for activation."},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"validateEmail",value:function(){if(0===this.state.email.length)return null;return/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(String(this.state.email).toLowerCase())?"success":"error"}},{key:"getValidationState",value:function(){var e=this.state.password.length;return e>8?"success":e>5?"warning":e>0?"error":null}},{key:"getValidationStateConf",value:function(){return 0===this.state.confPass.length?null:this.state.password===this.state.confPass?"success":"error"}},{key:"handleChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangeConfirm",value:function(e){this.setState({confPass:e.target.value})}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleDismiss",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"displayAlert",value:function(){return l.a.createElement(y.a,{bsStyle:this.state.signupStatus,onDismiss:this.handleDismiss,id:"alertBox"},l.a.createElement("p",null,this.state.signUpMessage))}},{key:"signUpClicked",value:function(e){var t=this;this.setState({signInLoading:!0});var a={password:this.state.password,name:this.state.name,email:this.state.email};k.a.post(window.BACKEND+"/api/account/signup",a).then(function(e){"Signed Up"===(e=e.data).message&&t.setState({signInLoading:!1,show:!0,signupStatus:"success",signUpMessage:"You have signed up successfully. Please check your email for activation.",name:"",password:"",confPass:"",email:""})}).catch(function(e){t.setState({signInLoading:!1,show:!0,signupStatus:"danger",signUpMessage:e.response.data.message,name:"",password:"",confPass:"",email:""})})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",null,l.a.createElement(w.a,{controlId:"signUpName"},l.a.createElement(C.a,{type:"text",value:this.state.name,placeholder:"Name",onChange:this.handleChangeName})),l.a.createElement(w.a,{controlId:"signUpEmail",validationState:this.validateEmail()},l.a.createElement(C.a,{type:"email",value:this.state.email,placeholder:"Email",onChange:this.handleChangeEmail}),l.a.createElement(C.a.Feedback,null)),l.a.createElement(w.a,{controlId:"formBasicTextSignupPass",validationState:this.getValidationState()},l.a.createElement(C.a,{type:"password",value:this.state.password,placeholder:"Password",onChange:this.handleChange}),l.a.createElement(C.a.Feedback,null),l.a.createElement(O.a,{id:"passwordHelp"},"Password must be minimum 8 characters long")),l.a.createElement(w.a,{controlId:"formBasicTextSignupConfPass",validationState:this.getValidationStateConf()},l.a.createElement(C.a,{type:"password",value:this.state.confPass,placeholder:"Confirm Password",onChange:this.handleChangeConfirm}),l.a.createElement(C.a.Feedback,null)),l.a.createElement(j.a,{block:!0,bsStyle:"warning",disabled:this.state.signInLoading,onClick:this.state.signInLoading?null:this.signUpClicked},this.state.signInLoading?"Processing...":"Sign Up")),this.state.show?this.displayAlert():null)}}]),t}(n.Component);a(150);k.a.defaults.withCredentials=!0;var I=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e,a))).handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n.handleChangeEmail=n.handleChangeEmail.bind(Object(h.a)(Object(h.a)(n))),n.logInClicked=n.logInClicked.bind(Object(h.a)(Object(h.a)(n))),n.handleDismiss=n.handleDismiss.bind(Object(h.a)(Object(h.a)(n))),n.handleShow=n.handleShow.bind(Object(h.a)(Object(h.a)(n))),n.displayAlert=n.displayAlert.bind(Object(h.a)(Object(h.a)(n))),n.state={password:"",email:"",logInLoading:!1,signInError:"",show:!1,logInStatus:"danger"},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"validateEmail",value:function(){if(0===this.state.email.length)return null;return/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(String(this.state.email).toLowerCase())?"success":"error"}},{key:"getValidationState",value:function(){var e=this.state.password.length;return e>8?"success":e>5?"warning":e>0?"error":null}},{key:"handleChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"logInClicked",value:function(){var e=this,t=this.state,a=t.email,n=t.password;this.setState({logInLoading:!0}),k.a.post(window.BACKEND+"/api/account/signin",{email:a,password:n}).then(function(t){(t=t.data).success?(e.setState({logInLoading:!1,password:"",email:"",token:t.token,show:!0,logInStatus:"success"}),e.props.stateChanger({loggedIn:!0,token:t.token,logOutButtonStatus:"warning"})):e.setState({signInError:t.message,logInLoading:!1,show:!0,logInStatus:"danger"})}).catch(function(t){e.setState({signInError:"Please fill the form correctly",logInLoading:!1,show:!0,logInStatus:"danger"})})}},{key:"handleDismiss",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"displayAlert",value:function(){return l.a.createElement(y.a,{bsStyle:this.state.logInStatus,onDismiss:this.handleDismiss,id:"alertBox"},l.a.createElement("p",null,this.state.signInError))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",null,l.a.createElement(w.a,{controlId:"LogInEmail",validationState:this.validateEmail()},l.a.createElement(C.a,{type:"email",value:this.state.email,placeholder:"Email",onChange:this.handleChangeEmail}),l.a.createElement(C.a.Feedback,null)),l.a.createElement(w.a,{controlId:"formBasicText",validationState:this.getValidationState()},l.a.createElement(C.a,{type:"password",value:this.state.password,placeholder:"Password",onChange:this.handleChange}),l.a.createElement(C.a.Feedback,null))),l.a.createElement(j.a,{block:!0,bsStyle:"success",disabled:this.state.logInLoading,onClick:this.state.logInLoading?null:this.logInClicked},this.state.logInLoading?"Authenticating...":"Log In"),this.state.show?this.displayAlert():null)}}]),t}(n.Component),D=a(48),L=a(187),B=a(50),_=a(190),A=a(188);k.a.defaults.withCredentials=!0;var Q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,l=t.name;a.setState(Object(B.a)({},l,n))},a.handleSubmit=function(e){var t=a.state.formTitle,n=a.state.formDescription,l=a.state.listQuestions;k.a.post(window.BACKEND+"/api/forms/",{title:t,description:n,questions:l}).then(function(e){alert("\u6210\u529f\u65b0\u589e\u8868\u55ae"),a.props.history.push("/dashboard")}).catch(function(e){alert("\u5c37\u5c2c...")})},a.addQuestion=function(e){e.target.name;var t=a.state.listQuestions.slice();t.push({question_text:a.state.newQuestion,question_type:a.state.newQuestionType}),a.setState({listQuestions:t})},a.delQuestion=function(e){var t=e.target.value,n=parseInt(t.split("_")[1]);alert("\u522a\u9664\u554f\u984c: "+n);var l=a.state.listQuestions.slice();l.splice(n,1),a.setState({listQuestions:l})},a.state={isGoing:!0,numberOfGuests:2,formTitle:"Example Form Title",formDescription:"Example Form Description",numQuestions:1,listQuestions:[],newQuestion:"Example Question",newQuestionType:"text"},a.handleInputChange=a.handleInputChange.bind(Object(h.a)(Object(h.a)(a))),a.addQuestion=a.addQuestion.bind(Object(h.a)(Object(h.a)(a))),a.handelSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a.delQuestion=a.delQuestion.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,i=this.state.listQuestions.entries()[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var r=s.value,o=Object(D.a)(r,2),c=o[0],u=o[1],m="Q_"+c;"select"===u.question_type?e.push(l.a.createElement("div",null,l.a.createElement(_.a,null,l.a.createElement(_.a.Heading,null,l.a.createElement(_.a.Title,{componentClass:"h3"},"\u7b2c",c+1,"\u984c")," ",l.a.createElement(j.a,{type:"button",bsStyle:"danger",value:m,className:"new",onClick:this.delQuestion},"X \u522a\u9664\u9019\u984c")),l.a.createElement(_.a.Body,null,u.question_text),l.a.createElement(_.a.Footer,null,l.a.createElement(C.a,{componentClass:"select",name:m,onChange:this.handleInputChangeForm},l.a.createElement("option",{value:"A"},"A"),l.a.createElement("option",{value:"B"},"B"),l.a.createElement("option",{value:"C"},"C"),l.a.createElement("option",{value:"D"},"D")))))):"text"===u.question_type&&e.push(l.a.createElement("div",null,l.a.createElement(_.a,null,l.a.createElement(_.a.Heading,null,l.a.createElement(_.a.Title,{componentClass:"h3"},"\u7b2c",c+1,"\u984c"),"  ",l.a.createElement(j.a,{type:"button",bsStyle:"danger",value:m,className:"new",onClick:this.delQuestion},"X \u522a\u9664\u9019\u984c")),l.a.createElement(_.a.Body,null,u.question_text),l.a.createElement(_.a.Footer,null,l.a.createElement(C.a,{name:m,type:"text",onChange:this.handleInputChangeForm})))))}}catch(h){a=!0,n=h}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(E.a,{xs:12,md:12},l.a.createElement(L.a,null,"\u65b0\u589e\u554f\u5377",l.a.createElement("small",null)),l.a.createElement(_.a,{bsStyle:"info"},l.a.createElement(_.a.Heading,null,l.a.createElement(_.a.Title,{componentClass:"h3"},"\u554f\u5377\u8a2d\u5b9a")),l.a.createElement(_.a.Body,null,l.a.createElement(w.a,{controlId:""},l.a.createElement(E.a,{xs:12,md:4},l.a.createElement(A.a,null,"\u554f\u5377\u6a19\u984c")),l.a.createElement(E.a,{xs:12,md:6},l.a.createElement(C.a,{name:"formTitle",type:"text",value:this.state.formTitle,onChange:this.handleInputChange}))),l.a.createElement(w.a,{controlId:""},l.a.createElement(E.a,{xs:12,md:4},l.a.createElement(A.a,null,"\u554f\u5377\u8aaa\u660e")),l.a.createElement(E.a,{xs:12,md:6},l.a.createElement(C.a,{name:"formDescription",type:"text",value:this.state.formDescription,onChange:this.handleInputChange}))))),e,l.a.createElement(_.a,{bsStyle:"warning"},l.a.createElement(_.a.Heading,null,l.a.createElement(_.a.Title,{componentClass:"h3"},"+\u65b0\u554f\u984c")),l.a.createElement(_.a.Body,null,l.a.createElement(w.a,{controlId:""},l.a.createElement(E.a,{xs:12,md:4},l.a.createElement(A.a,null,"\u6558\u8ff0")),l.a.createElement(E.a,{xs:12,md:6},l.a.createElement(C.a,{name:"newQuestion",componentClass:"textarea",value:this.state.newQuestion,onChange:this.handleInputChange}))),l.a.createElement(w.a,{controlId:""},l.a.createElement(E.a,{xs:12,md:4},l.a.createElement(A.a,null,"\u984c\u578b")),l.a.createElement(E.a,{xs:12,md:6},l.a.createElement(C.a,{componentClass:"select",name:"newQuestionType",value:this.state.newQuestionType,onChange:this.handleInputChange},l.a.createElement("option",{value:"text"},"\u7c21\u7b54\u984c"),l.a.createElement("option",{value:"select"},"\u55ae\u9078\u984c")))),l.a.createElement(j.a,{type:"button",className:"new",onClick:this.addQuestion},"\u65b0\u589e\u554f\u984c"))),l.a.createElement(j.a,{type:"submit",value:"submit",onClick:this.handleSubmit},"\u5b8c\u6210~\u65b0\u589e\u554f\u5377!"))))}}]),t}(l.a.Component);k.a.defaults.withCredentials=!0;var F=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,l=t.name;a.setState(Object(B.a)({},l,n))},a.handleInputChangeForm=function(e){var t=e.target,n=t.value,l=t.name,s=parseInt(l.split("_")[1]);a.setState(Object(B.a)({},l,n));var i=a.state.listAnswers.slice();i[s].answer=n,a.setState({listAnswers:i})},a.handleSubmit=function(e){var t=a.props.match.params.FormId,n=a.state.listAnswers.map(function(e){return e.answer});k.a.post(window.BACKEND+"/api/forms/"+t,{answers:n}).then(function(e){alert("\u6210\u529f\u586b\u5beb\u8868\u55ae"),a.props.history.push("/home")}).catch(function(e){alert("\u5c37\u5c2c...")})},a.state={isGoing:!0,numberOfGuests:2,formTitle:"Sample Title",formDescription:"Sample Form Description",listAnswers:[],listQuestions:[{question_text:"1+1=?",question_type:"text"},{question_text:"2+2=? A: 4 B:5 C:6 D:7",question_type:"select"}]},a.handleInputChange=a.handleInputChange.bind(Object(h.a)(Object(h.a)(a))),a.handleInputChangeForm=a.handleInputChangeForm.bind(Object(h.a)(Object(h.a)(a))),a.handelSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.get(window.BACKEND+"/api/forms/"+this.props.match.params.FormId).then(function(t){var a=(t=t.data).questions,n=[],l=!0,s=!1,i=void 0;try{for(var r,o=a.entries()[Symbol.iterator]();!(l=(r=o.next()).done);l=!0){var c=r.value,u=Object(D.a)(c,2),m=u[0];u[1];n.push([{question_id:"Q_"+m,answer:""}])}}catch(h){s=!0,i=h}finally{try{l||null==o.return||o.return()}finally{if(s)throw i}}e.setState({listAnswers:n,listQuestions:a,formTitle:t.title,formDescription:t.description})}).catch(function(e){alert("\u5c37\u5c2c...")})}},{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,i=this.state.listQuestions.entries()[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var r=s.value,o=Object(D.a)(r,2),c=o[0],u=o[1],m="Q_"+c;"select"===u.question_type?e.push(l.a.createElement("div",null,l.a.createElement(_.a,null,l.a.createElement(_.a.Heading,null,l.a.createElement(_.a.Title,{componentClass:"h3"},"\u7b2c",c+1,"\u984c")),l.a.createElement(_.a.Body,null,u.question_text),l.a.createElement(_.a.Footer,null,l.a.createElement(C.a,{componentClass:"select",name:m,onChange:this.handleInputChangeForm},l.a.createElement("option",{value:"A"},"A"),l.a.createElement("option",{value:"B"},"B"),l.a.createElement("option",{value:"C"},"C"),l.a.createElement("option",{value:"D"},"D")))))):"text"===u.question_type&&e.push(l.a.createElement("div",null,l.a.createElement(_.a,null,l.a.createElement(_.a.Heading,null,l.a.createElement(_.a.Title,{componentClass:"h3"},"\u7b2c",c+1,"\u984c")),l.a.createElement(_.a.Body,null,u.question_text),l.a.createElement(_.a.Footer,null,l.a.createElement(C.a,{name:m,type:"text",onChange:this.handleInputChangeForm})))))}}catch(h){a=!0,n=h}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(E.a,{xs:12,md:12},l.a.createElement(L.a,null,this.state.formTitle," ",l.a.createElement("small",null)),l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,this.state.formDescription)),e,l.a.createElement(j.a,{type:"submit",value:"submit",onClick:this.handleSubmit},"\u6211\u586b\u5b8c\u4e86!"))))}}]),t}(l.a.Component);k.a.defaults.withCredentials=!0;var N=function(e){function t(e){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,i=this.props.FormList.entries()[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var r=s.value,o=Object(D.a)(r,2),c=(o[0],o[1]),u="/forms/"+c.id;e.push(l.a.createElement("ul",{class:"list-group"},l.a.createElement("li",{class:"list-group-item"},l.a.createElement(d.b,{to:u}," ",l.a.createElement("h3",null,c.title)," "))))}}catch(m){a=!0,n=m}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return l.a.createElement("div",{class:"panel panel-primary "},l.a.createElement("div",{class:"panel-heading"},l.a.createElement("h3",{class:"panel-title"},"\u672a\u586b")),l.a.createElement("div",{class:"panel-body"},e))}}]),t}(n.Component),q=function(e){function t(e){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,i=this.props.FormList.entries()[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var r=s.value,o=Object(D.a)(r,2),c=(o[0],o[1]);e.push(l.a.createElement("ul",{class:"list-group"},l.a.createElement("h3",{class:"list-group-item"},c.title)))}}catch(u){a=!0,n=u}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return l.a.createElement("div",{class:"panel panel-success "},l.a.createElement("div",{class:"panel-heading"},l.a.createElement("h3",{class:"panel-title"},"\u5df2\u586b")),l.a.createElement("div",{class:"panel-body"},e))}}]),t}(n.Component),T=function(e){function t(e){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,i=this.props.FormList.entries()[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var r=s.value,o=Object(D.a)(r,2),c=(o[0],o[1]);e.push(l.a.createElement("ul",{class:"list-group-item"},l.a.createElement("h3",{style:{height:"1em",fontWeight:"900"},class:"list-group-title"},c.title))),e.push(l.a.createElement("li",{class:"list-group-item"},c.winners.map(function(e){return l.a.createElement("span",{style:{display:"inline-block",margin:"0 20px",fontSize:"18px"}},e)})))}}catch(u){a=!0,n=u}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return l.a.createElement("div",{class:"panel panel-warning "},l.a.createElement("div",{class:"panel-heading"},l.a.createElement("h3",{class:"panel-title"},"\u5df2\u958b\u734e")),l.a.createElement("div",{class:"panel-body"},e))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dueList:[],filledList:[],unfilledList:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.get("".concat(window.BACKEND,"/api/forms")).then(function(t){e.setState({dueList:t.data.due,filledList:t.data.filled,unfilledList:t.data.unfilled})}).catch(function(e){alert("Something wrong in Home.js")})}},{key:"render",value:function(){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(E.a,null,l.a.createElement(L.a,null,"\u554f\u5377\u586b\u7b54\u7cfb\u7d71"))),l.a.createElement(f.a,null,l.a.createElement(E.a,null,l.a.createElement(N,{FormList:this.state.unfilledList})),l.a.createElement(E.a,null,l.a.createElement(q,{FormList:this.state.filledList})),l.a.createElement(E.a,null,l.a.createElement(T,{FormList:this.state.dueList}))),l.a.createElement(f.a,null,l.a.createElement(E.a,null,l.a.createElement(d.b,{to:"/forms/new"},l.a.createElement("button",{type:"button",class:"btn btn-primary btn-block"},l.a.createElement("h3",null," \u5275\u5efa\u554f\u5377 "))))))}}]),t}(n.Component);k.a.defaults.withCredentials=!0;var P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleDeleteRequest=function(e){var t=a.props.value.form_id;k.a.post(window.BACKEND+"/api/forms/"+t+"/delete/").then(function(e){a.setState({exist:!1})}).catch(function(e){alert("ggg...")})},a.handleDrawRequest=function(e){var t=a.props.value.form_id;k.a.get(window.BACKEND+"/api/forms/"+t+"/due/",{}).then(function(e){var t=e.data;a.setState({has_drawn:!0,winners:t.winners})}).catch(function(e){alert("ggg,..")})},a.state={has_drawn:a.props.value.has_drawn,winners:a.props.value.winners,exist:!0,form_id:a.props.value.form_id},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.value.description.length>U?this.props.value.description.substring(0,U)+"...":this.props.value.description,t="forms/"+this.props.value.form_id;return this.state.exist?this.state.has_drawn?l.a.createElement(_.a,{bsStyle:"info"},l.a.createElement(_.a.Heading,null,l.a.createElement(_.a.Title,{componentClass:"h3"}," ",l.a.createElement(d.b,{to:t},this.props.value.title)," ")),l.a.createElement(_.a.Body,null,l.a.createElement(w.a,null,l.a.createElement(E.a,{xs:12,sm:4,md:4},l.a.createElement(A.a,null," \u8aaa\u660e ")),l.a.createElement(E.a,{xs:12,sm:6,md:6},l.a.createElement(A.a,null," ",e," "))),l.a.createElement(w.a,null,l.a.createElement(E.a,{xs:12,sm:4,md:4},l.a.createElement(A.a,null," \u4e2d\u734e\u8005 ")),l.a.createElement(E.a,{xs:12,sm:6,md:6},l.a.createElement(A.a,null,this.state.winners.map(function(e){return l.a.createElement("span",{style:{display:"inline-block",margin:"0 5px"}},e)})))),this.state.form_id&&l.a.createElement(d.b,{to:"/forms/"+this.state.form_id+"/summary"},"\u7d71\u8a08"),l.a.createElement(j.a,{bsStyle:"danger",bsSize:"small",onClick:this.handleDeleteRequest},"\u522a\u9664"))):l.a.createElement(_.a,{bsStyle:"info"},l.a.createElement(_.a.Heading,null,l.a.createElement(_.a.Title,{componentClass:"h3"}," ",l.a.createElement(d.b,{to:t},this.props.value.title)," ")),l.a.createElement(_.a.Body,null,l.a.createElement(w.a,null,l.a.createElement(E.a,{xs:12,sm:4,md:4},l.a.createElement(A.a,null," \u8aaa\u660e ")),l.a.createElement(E.a,{xs:12,sm:6,md:6},l.a.createElement(A.a,null," ",e," "))),this.state.form_id&&l.a.createElement(d.b,{to:"/forms/"+this.state.form_id+"/summary"},"\u7d71\u8a08"),l.a.createElement(j.a,{bsStyle:"danger",bsSize:"small",onClick:this.handleDeleteRequest},"\u522a\u9664")),l.a.createElement(j.a,{bsStyle:"success",onClick:this.handleDrawRequest,block:!0},"\u62bd\u734e")):l.a.createElement("div",null)}}]),t}(l.a.Component),U=10,H=P;k.a.defaults.withCredentials=!0;var M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={preview_list:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.get(window.BACKEND+"/api/forms/my/",{}).then(function(t){var a=t.data;console.log(a);var n=[],l=!0,s=!1,i=void 0;try{for(var r,o=a.form[Symbol.iterator]();!(l=(r=o.next()).done);l=!0){var c=r.value;n.push({form_id:c._id,title:c.title,description:c.description,has_drawn:c.isDue,winners:c.winners})}}catch(u){s=!0,i=u}finally{try{l||null==o.return||o.return()}finally{if(s)throw i}}console.log(n),e.setState({preview_list:n})}).catch(function(e){alert("\u5c37\u5c2c...")})}},{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,i=this.state.preview_list[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var r=s.value;e.push(l.a.createElement(H,{value:r}))}}catch(o){a=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return l.a.createElement("div",null,l.a.createElement(d.b,{to:"/forms/new"},l.a.createElement("button",{type:"button",class:"btn btn-primary btn-block"},l.a.createElement("h3",null," \u5275\u5efa\u554f\u5377 "))),l.a.createElement(g.a,null,l.a.createElement(L.a,null," \u6211\u7684\u554f\u5377 "),e))}}]),t}(l.a.Component),R=a(86),V=a.n(R),W=a(189),G=a(179);k.a.defaults.withCredentials=!0;var z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).range=function(e){return Array.from(Array(e).keys())},a.state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.get("".concat(window.BACKEND,"/api/forms/").concat(this.props.match.params.FormId,"/summary")).then(function(t){var a=t.data.form,n=t.data.answers;console.log(a),console.log(n),e.setState({form:a,answers:n})}).catch(function(e){alert("ERROR in Summary.js")})}},{key:"render",value:function(){var e=this;return this.state.form?l.a.createElement("div",{style:{width:"80%",padding:"30px",margin:"auto"}},l.a.createElement("h1",null,this.state.form.title),l.a.createElement("h3",null,this.state.form.description),this.range(this.state.form.questions.length).map(function(t){var a=e.state.form.questions[t];if("text"!==a.question_type){var n={A:0,B:1,C:2,D:3},s=[0,0,0,0],i=!0,r=!1,o=void 0;try{for(var c,u=e.state.answers[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){s[n[c.value.answers[t]]]+=1}}catch(d){r=!0,o=d}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}var m=[{values:s,labels:["A","B","C","D"],type:"pie"}],h={height:400,width:500}}return l.a.createElement("div",{key:"panel"+t},l.a.createElement(_.a,null,l.a.createElement(_.a.Heading,null,a.question_text),"text"===a.question_type?l.a.createElement(W.a,null,e.state.answers.map(function(e){return l.a.createElement(G.a,null,e.answers[t])})):l.a.createElement(V.a,{data:m,layout:h}),l.a.createElement(_.a.Body,null,"Some more panel content here.")))})):l.a.createElement("p",null,"Loading...")}}]),t}(n.Component);k.a.defaults.withCredentials=!0;var $=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e,a))).stateChanger=n.stateChanger.bind(Object(h.a)(Object(h.a)(n))),n.logOutClicked=n.logOutClicked.bind(Object(h.a)(Object(h.a)(n))),n.state={loggedIn:!1,logOutButtonStatus:"warning",logOutLoadingMessage:"Log Out",logOutLoading:!1},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"stateChanger",value:function(e){this.setState(e)}},{key:"componentDidMount",value:function(){var e=this;k.a.get(window.BACKEND+"/api/account/verify").then(function(t){(t=t.data).success?e.setState({logOutLoading:!1,loggedIn:!0}):e.setState({logOutLoading:!1})})}},{key:"logOutClicked",value:function(){var e=this;this.setState({logOutLoading:!0,logOutLoadingMessage:"Logging Out...",logOutButtonStatus:"info"}),k.a.get(window.BACKEND+"/api/account/logout").then(function(t){(t=t.data).success?e.setState({logOutLoading:!1,loggedIn:!1}):e.setState({logOutLoading:!1})})}},{key:"render",value:function(){var e="".concat(window.BACKEND,"/api/account/logout");return l.a.createElement("div",{className:"App"},l.a.createElement(d.a,null," ",this.state.loggedIn?l.a.createElement("div",null,l.a.createElement(d.b,{to:"/"},"Home"),l.a.createElement(d.b,{to:"/dashboard"},"Dashboard"),l.a.createElement("a",{href:e},"logout"),l.a.createElement(p.d,null,l.a.createElement(p.b,{exact:!0,path:"/",component:K}),l.a.createElement(p.b,{exact:!0,path:"/dashboard",component:M}),l.a.createElement(p.b,{exact:!0,path:"/forms/new",component:Q}),l.a.createElement(p.b,{exact:!0,path:"/forms/:FormId",component:F}),l.a.createElement(p.b,{exact:!0,path:"/forms/:FormId/summary",component:z}),l.a.createElement(p.a,{to:"/"}))):l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(E.a,{xs:12,md:12},l.a.createElement("div",{className:"loginBoxContainer"},l.a.createElement(v.a,{defaultActiveKey:1,id:"uncontrolled-tab-example"},l.a.createElement(b.a,{eventKey:1,title:"Login",className:"tabContent"},l.a.createElement(I,{stateChanger:this.stateChanger})),l.a.createElement(b.a,{eventKey:2,title:"Sign Up",className:"tabContent"},l.a.createElement(x,null)))))))))}}]),t}(n.Component),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}window.BACKEND="http://localhost:9090",i.a.render(l.a.createElement($,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");J?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):X(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):X(e)})}}()},89:function(e,t,a){e.exports=a(180)},94:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){}},[[89,2,1]]]);
//# sourceMappingURL=main.cc9d4fba.chunk.js.map